# 项目规划

此文档包含了该项目的开发规划和进度归档

## 规划

### To-do & done List：
- [x] 基本功能
    - 用户模块
        - [x] 登录与注册
        - [x] JWT & role
        - [x] refresh_token
        - [x] 登出（token黑名单表）
        - [x] 更新信息
        - [x] 个人信息（存储空间）
    - 文件模块
        - [x] 上传下载
        - [x] 删除
        - [x] 获取文件列表
        - [x] 重命名文件
        - [x] 查看文件信息
        - [x] 文件秒传
- [x] 测试基本功能无误
- [x] Redis缓存
- [x] 完善错误抛出机制
- 进阶功能
  - 用户相关
    - [x] 个人头像
    - [x] 限定空间资源 
    - [x] VIP用户
    - [x] 邀请码注册限制
    - [x] 账户安全
    - [x] 邮箱验证码&有效期
  - 文件相关
    - [x] 文件预览
    - [x] 限速
    - [x] 秒传
    - [x] 文件收藏
    - [x] 文件搜索
    - [x] 重构文件缓存kv
    - [x] 分片上传
    - [x] 断点传续
    - [x] 回收站
    - 集成MinIO
      - [x] Docker镜像
      - [x] 新增util_storage
      - [x] 重构file_service
      - [x] 分片合并后的file -> minIO
      - [x] 头像
      - [x] Download流式传输
      - [x] 环境变量配置
  - 分享模块
    - [x] 加密链接
    - [x] 批量分享
  - 后台管理界面
    - [x] 总用户量/总存储量
    - [x] ban user
    - [x] recover banned user
    - [x] banned user list
    - [x] give/deprive admin
    - [x] user/admin list
- [x] 编写api说明文档
- [x] 项目说明文档
- [x] Viper
- [x] Zap
- 安全问题
  - [x] XSS：上传或预览文本文件时可能触发，但是本项目将文本文件的上传一律设置为了`text/plain`，并且使用io.Copy流式传输，且启用了`"X-XSS-Protection"`XSS过滤，基本没有XSS风险
  - [x] SQL注入：gorm内部会自动进行参数化处理，并且项目内基本使用了参数化查询，基本没有风险
  - [x] CSRF：正常来说应使用CSRF中间件并进行CSRF Token认证，但是本项目认证方式为通过请求头传递的jwt，不会被CSRF攻击
  - [x] 其他： 添加RateLimited中间件和Security中间件
- api测试 - APIFox
  - [x] 用户部分
  - [x] 验证码部分
  - [x] 文件部分
  - [x] 分享部分
  - [x] 后台部分
- [ ] Swagger
- [ ] vibe 前端 - gemini
- [ ] 项目本地部署测试
- 文档相关
    - [ ] 项目说明文档
    - [ ] plan
    - [ ] api_doc
    - [ ] swagger
    - [ ] apiFox文档
    - [ ] 要求实现文档
    - [ ] README.md
- [ ] Dockerfile
- [ ] Docker-compose
- [ ] Dockerhub